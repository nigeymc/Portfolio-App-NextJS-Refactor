{"ast":null,"code":"import _toConsumableArray from \"/Users/niallmckenna/Dropbox/A-react-apps/portfolio-app-nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/niallmckenna/Dropbox/A-react-apps/portfolio-app-nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/Users/niallmckenna/Dropbox/A-react-apps/portfolio-app-nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport database from '../firebase/firebase';\n\nvar setDataLoading = function setDataLoading(loading) {\n  return {\n    type: \"FETCH_DATA_LOADING\",\n    payload: loading\n  };\n};\n\nvar fetchDataSuccess = function fetchDataSuccess(payload) {\n  return {\n    type: \"FETCH_DATA_SUCCESS\",\n    payload: payload\n  };\n};\n\nvar fetchDataFailure = function fetchDataFailure() {\n  return {\n    type: \"FETCH_DATA_FAILURE\"\n  };\n};\n\nexport var setTextFilter = function setTextFilter() {\n  var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return {\n    type: 'SET_TEXT_FILTER',\n    text: text\n  };\n};\nexport var fetchData = function fetchData() {\n  return function (dispatch) {\n    dispatch(setDataLoading(true)); // <-- start loading\n\n    return database.ref('skillsPage').once('value').then(function (snapshot) {\n      var skillsPage = [];\n      snapshot.forEach(function (child) {\n        skillsPage.push(_objectSpread({}, child.val()));\n      });\n      var languages = skillsPage[0],\n          frameworks = skillsPage[1],\n          services = skillsPage[2],\n          tools = skillsPage[3],\n          skillset = skillsPage[4],\n          education = skillsPage[5];\n      var educationArr = education.education.reduce(function (total, amount) {\n        return total.concat(amount);\n      }, []);\n\n      var _educationArr = _slicedToArray(educationArr, 2),\n          university = _educationArr[0],\n          school = _educationArr[1];\n\n      var setLanguages = languages.languages;\n      var setFrameworks = frameworks.libraries_frameworks;\n      var setServices = services.services;\n      var setTools = tools.tools;\n      var setSkillset = skillset.skillset;\n      var searchList = [].concat(_toConsumableArray(setLanguages), _toConsumableArray(setFrameworks), _toConsumableArray(setServices), _toConsumableArray(setTools), _toConsumableArray(setSkillset));\n      var skillsKeys = skillsPage.map(function (item) {\n        return Object.keys(item);\n      }, []);\n\n      var _skillsKeys = _slicedToArray(skillsKeys, 5),\n          langKey = _skillsKeys[0],\n          frameworksKey = _skillsKeys[1],\n          servicesKey = _skillsKeys[2],\n          toolsKey = _skillsKeys[3],\n          skillsetKey = _skillsKeys[4];\n\n      var skillsValues = skillsPage.map(function (item) {\n        return Object.values(item);\n      }, []);\n      var skillsValuesArr = skillsValues.reduce(function (sum, item) {\n        return sum.concat(item);\n      }, []);\n\n      var _skillsValuesArr = _slicedToArray(skillsValuesArr, 5),\n          languagesVals = _skillsValuesArr[0],\n          frameworksVals = _skillsValuesArr[1],\n          servicesVals = _skillsValuesArr[2],\n          toolsVals = _skillsValuesArr[3],\n          skillsetVals = _skillsValuesArr[4];\n\n      dispatch(fetchDataSuccess({\n        languages: languages,\n        frameworks: frameworks,\n        services: services,\n        tools: tools,\n        skillset: skillset,\n        university: university,\n        school: school,\n        searchList: searchList,\n        langKey: langKey,\n        frameworksKey: frameworksKey,\n        servicesKey: servicesKey,\n        toolsKey: toolsKey,\n        skillsetKey: skillsetKey,\n        languagesVals: languagesVals,\n        frameworksVals: frameworksVals,\n        servicesVals: servicesVals,\n        toolsVals: toolsVals,\n        skillsetVals: skillsetVals\n      }));\n    })[\"catch\"](function (e) {\n      console.error('Error fetching data', e);\n      dispatch(fetchDataFailure());\n    })[\"finally\"](function () {\n      return dispatch(setDataLoading(false));\n    }); // <-- complete loading\n  };\n};","map":null,"metadata":{},"sourceType":"module"}