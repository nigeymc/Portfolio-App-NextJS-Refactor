{"ast":null,"code":"import _slicedToArray from \"/Users/niallmckenna/Dropbox/A-react-apps/portfolio-app-nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport database from '../firebase/firebase';\n\nvar setDataLoading = function setDataLoading(loading) {\n  return {\n    type: \"FETCH_DATA_LOADING\",\n    payload: loading\n  };\n};\n\nvar fetchDataSuccess = function fetchDataSuccess(payload) {\n  return {\n    type: \"FETCH_DATA_SUCCESS\",\n    payload: payload // { firstName, lastName }\n\n  };\n};\n\nvar fetchDataFailure = function fetchDataFailure() {\n  return {\n    type: \"FETCH_DATA_FAILURE\"\n  };\n};\n\nexport var fetchData = function fetchData() {\n  return function (dispatch) {\n    dispatch(setDataLoading(true)); // <-- start loading\n\n    return database.ref().once('value').then(function (snapshot) {\n      var portfolioData = snapshot.val();\n      var githubProjects = portfolioData.githubProjects;\n\n      var _githubProjects = _slicedToArray(githubProjects, 1),\n          githubThumbnails = _githubProjects[0];\n\n      var _githubThumbnails$thu = _slicedToArray(githubThumbnails.thumbnails, 3),\n          portfolioThumbnail = _githubThumbnails$thu[0],\n          expensifyThumbnail = _githubThumbnails$thu[1],\n          newFeaturesThumbnail = _githubThumbnails$thu[2];\n\n      var nonGithubProjects = portfolioData.nonGithubProjects;\n      console.log(nonGithubProjects);\n      dispatch(fetchDataSuccess({\n        portfolioThumbnail: portfolioThumbnail,\n        expensifyThumbnail: expensifyThumbnail,\n        newFeaturesThumbnail: newFeaturesThumbnail,\n        nonGithubProjects: nonGithubProjects\n      }));\n    })[\"catch\"](function (e) {\n      console.error('Error fetching data', e);\n      dispatch(fetchDataFailure());\n    })[\"finally\"](function () {\n      return dispatch(setDataLoading(false));\n    }); // <-- complete loading\n  };\n};","map":null,"metadata":{},"sourceType":"module"}