{"ast":null,"code":"import _slicedToArray from \"/Users/niallmckenna/Dropbox/A-react-apps/portfolio-app-nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar githubRepos = \"https://api.github.com/users/nigeymc/repos\";\n\nvar setDataLoading = function setDataLoading(loading) {\n  return {\n    type: \"FETCH_DATA_LOADING\",\n    payload: loading\n  };\n};\n\nvar fetchDataSuccess = function fetchDataSuccess(payload) {\n  return {\n    type: \"FETCH_DATA_SUCCESS\",\n    payload: payload\n  };\n};\n\nvar fetchDataFailure = function fetchDataFailure() {\n  return {\n    type: \"FETCH_DATA_FAILURE\"\n  };\n};\n\nexport var fetchData = function fetchData() {\n  return function (dispatch) {\n    dispatch(setDataLoading(true)); // <-- start loading\n\n    return fetch(githubRepos, {\n      headers: {\n        'Accept': 'application/vnd.github.v3+json'\n      }\n    }).then(function (response) {\n      return response.json();\n    }) //Converting the response to a JSON object\n    .then(function (data) {\n      var repos = Object.entries(data);\n      var arr = repos.reduce(function (total, amount) {\n        return total.concat(amount);\n      }, []);\n      var filteredReposArr = arr.filter(function (item, key) {\n        if (typeof item !== \"string\") {\n          return item;\n        }\n      }, []);\n\n      var _filteredReposArr = _slicedToArray(filteredReposArr, 7),\n          endNav = _filteredReposArr[1],\n          expensify = _filteredReposArr[2],\n          portfolio = _filteredReposArr[3],\n          next = _filteredReposArr[4],\n          hooks = _filteredReposArr[6];\n\n      dispatch(fetchDataSuccess({\n        filteredReposArr: filteredReposArr,\n        endNav: endNav,\n        expensify: expensify,\n        portfolio: portfolio,\n        next: next,\n        hooks: hooks\n      }));\n    })[\"catch\"](function (e) {\n      console.error('Error fetching data', e);\n      dispatch(fetchDataFailure());\n    })[\"finally\"](function () {\n      return dispatch(setDataLoading(false));\n    }); // <-- complete loading\n  };\n};","map":null,"metadata":{},"sourceType":"module"}