{"ast":null,"code":"import _defineProperty from \"/Users/niallmckenna/Dropbox/A-react-apps/portfolio-app-nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport database from '../firebase/firebase';\n\nvar setDataLoading = function setDataLoading(loading) {\n  return {\n    type: \"FETCH_DATA_LOADING\",\n    payload: loading\n  };\n};\n\nvar fetchDataSuccess = function fetchDataSuccess(payload) {\n  return {\n    type: \"FETCH_DATA_SUCCESS\",\n    payload: payload // { firstName, lastName }\n\n  };\n};\n\nvar fetchDataFailure = function fetchDataFailure() {\n  return {\n    type: \"FETCH_DATA_FAILURE\"\n  };\n};\n\nexport var fetchData = function fetchData() {\n  return function (dispatch) {\n    dispatch(setDataLoading(true)); // <-- start loading\n\n    return database.ref('employment').once('value').then(function (snapshot) {\n      var employment = [];\n      snapshot.forEach(function (child) {\n        employment.push(_objectSpread({}, child.val()));\n      });\n      var riverIsland = employment[0],\n          stellaDot = employment[1],\n          nap = employment[2],\n          jet2 = employment[3];\n      var riSummary = riverIsland.summary.reduce(function (total, amount) {\n        return total.concat(amount);\n      }, []);\n      var sdSummary = stellaDot.summary.reduce(function (total, amount) {\n        return total.concat(amount);\n      }, []);\n      var napSummary = nap.summary.reduce(function (total, amount) {\n        return total.concat(amount);\n      }, []);\n      var jet2Summary = jet2.summary.reduce(function (total, amount) {\n        return total.concat(amount);\n      }, []);\n      dispatch(fetchDataSuccess({\n        employment: employment,\n        riverIsland: riverIsland,\n        riSummary: riSummary,\n        stellaDot: stellaDot,\n        sdSummary: sdSummary,\n        nap: nap,\n        napSummary: napSummary,\n        jet2: jet2,\n        jet2Summary: jet2Summary\n      }));\n    })[\"catch\"](function (e) {\n      console.error('Error fetching data', e);\n      dispatch(fetchDataFailure());\n    })[\"finally\"](function () {\n      return dispatch(setDataLoading(false));\n    }); // <-- complete loading\n  };\n};","map":null,"metadata":{},"sourceType":"module"}